{
  "meta": {
    "instanceId": "d8e4f3f201a1625c886024ee1cbb0c5fff4e0aa0b0514f20e2bd021193dc5fed"
  },
  "nodes": [
    {
      "id": "ea812abb-5f9c-45d9-9cca-c82cd100fa94",
      "name": "Google Sheets Trigger",
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "position": [
        -2000,
        800
      ],
      "parameters": {
        "options": {},
        "pollTimes": {
          "item": [
            {
              "mode": "everyX",
              "unit": "minutes"
            }
          ]
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit#gid=0",
          "cachedResultName": "Companies"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit?usp=drivesdk",
          "cachedResultName": "Copy of Company Decision Maker Discovery"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "8ac2066b-c84f-4556-a700-d95f015e6869",
      "name": "Apollo Organization Enrichment",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -460,
        800
      ],
      "parameters": {
        "url": "https://api.apollo.io/api/v1/organizations/enrich",
        "options": {},
        "sendQuery": true,
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"your-api-key\"\n}",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "queryParameters": {
          "parameters": [
            {
              "name": "domain",
              "value": "=  {{ $json.Website.extractDomain().replace(/^www\\./, '') }}\n"
            }
          ]
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "e38bf663-9d25-4fec-8900-605fd4f41f7b",
      "name": "Create Apollo People Search URL",
      "type": "n8n-nodes-base.code",
      "position": [
        580,
        720
      ],
      "parameters": {
        "jsCode": "const baseUrl = 'https://api.apollo.io/api/v1/mixed_people/search';\nconst seniorities = ['owner', 'founder', 'c_suite', 'partner', 'vp', 'head', 'director'];\nconst seniorityParams = seniorities.map(s => `person_seniorities[]=${encodeURIComponent(s)}`).join('&');\nconst domains = $input.all().map(item => item.json.Domain);\nconst domainParams = domains.map(d => `q_organization_domains_list[]=${encodeURIComponent(d)}`).join('&');\nconst perPageParam = 'per_page=10';\nconst fullUrl = `${baseUrl}?${seniorityParams}&${domainParams}&${perPageParam}`;\nreturn [{ json: { url: fullUrl } }];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "1f0d2075-e48f-4ddb-9de5-7f4c93df01a4",
      "name": "Loop Over Items (1000 per Batch)",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        360,
        800
      ],
      "parameters": {
        "options": {},
        "batchSize": 1000
      },
      "typeVersion": 3
    },
    {
      "id": "9bf3e9f1-e52f-4067-be7e-607c7178b0ca",
      "name": "Apollo Find Decision Makers",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        880,
        880
      ],
      "parameters": {
        "url": "={{ $json.url }}",
        "method": "POST",
        "options": {},
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"your-api-key\"\n}",
        "sendHeaders": true,
        "specifyHeaders": "json"
      },
      "typeVersion": 4.2
    },
    {
      "id": "9f92040a-2117-4710-8047-eddf7f299f3e",
      "name": "Add Contacts",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1180,
        520
      ],
      "parameters": {
        "columns": {
          "value": {
            "City": "={{ $('Split Out Batched Decision Maker Response').item.json.city }}",
            "Name": "={{ $('Split Out Batched Decision Maker Response').item.json.name }}",
            "State": "={{ $('Split Out Batched Decision Maker Response').item.json.state }}",
            "Company": "={{ $('Split Out Batched Decision Maker Response').item.json.organization.name }}",
            "Country": "={{ $('Split Out Batched Decision Maker Response').item.json.country }}",
            "Job Title": "={{ $('Split Out Batched Decision Maker Response').item.json.title }}",
            "Date Added": "={{ $now.toUTC().toFormat('yyyy-MM-dd') }}\n",
            "Start Date": "={{ $('Split Out Batched Decision Maker Response').item.json.employment_history[0].start_date }}",
            "Company Domain": "={{ $('Split Out Batched Decision Maker Response').item.json.organization.primary_domain }}",
            "LinkedIn Profile URL": "={{ $('Split Out Batched Decision Maker Response').item.json.linkedin_url }}",
            "GPT Department Classification": "={{ $json.message.content }}"
          },
          "schema": [
            {
              "id": "Name",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Job Title",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Job Title",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Start Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Start Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Department Classification",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Department Classification",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn Profile URL",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn Profile URL",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "City",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "City",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "State",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "State",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Country",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Country",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Address",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email Address",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Verified",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email Verified",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Added",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Date Added",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Contacted Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Last Contacted Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Status",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Lead Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Follow-Up Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "LinkedIn Profile URL"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "appendOrUpdate",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit?usp=drivesdk",
          "cachedResultName": "Copy of Company Decision Maker Discovery"
        }
      },
      "typeVersion": 4.5
    },
    {
      "id": "9a00bdf2-ef63-4119-8730-f84fa5a26224",
      "name": "Apollo Enrich Decision Makers",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1840,
        700
      ],
      "parameters": {
        "url": "https://api.apollo.io/api/v1/people/bulk_match?reveal_personal_emails=false&reveal_phone_number=false",
        "method": "POST",
        "options": {},
        "jsonBody": "={{ $json }}",
        "sendBody": true,
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"your-api-key\"\n}",
        "sendHeaders": true,
        "specifyBody": "json",
        "specifyHeaders": "json"
      },
      "typeVersion": 4.2
    },
    {
      "id": "b37bf514-8ab8-4f33-87da-0313ea48d95b",
      "name": "Create Apollo People Enrichment Payload",
      "type": "n8n-nodes-base.code",
      "position": [
        1620,
        620
      ],
      "parameters": {
        "jsCode": "const details = $input.all().map(item => ({\n  linkedin_url: item.json['LinkedIn Profile URL'],\n  domain: item.json['Company Domain']\n}));\n\nreturn [{ json: { details } }];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "3d9c30f1-8b06-4b38-9d79-295d84bf150e",
      "name": "Enrich Contacts",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1840,
        420
      ],
      "parameters": {
        "columns": {
          "value": {
            "Name": "=",
            "Job Title": "=",
            "Start Date": "=",
            "Email Address": "={{ $json.email }}",
            "Email Verified": "={{ $json.email_status === 'verified' ? 'Yes' : 'No' }}\n",
            "LinkedIn Profile URL": "={{ $json.linkedin_url }}"
          },
          "schema": [
            {
              "id": "Name",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Job Title",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Job Title",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Start Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Start Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Department Classification",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Department Classification",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn Profile URL",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn Profile URL",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Domain",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "City",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "City",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "State",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "State",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Country",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Country",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Address",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Email Address",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Verified",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email Verified",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Added",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Date Added",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Contacted Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Last Contacted Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Status",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Lead Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Follow-Up Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "LinkedIn Profile URL"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "appendOrUpdate",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit?usp=drivesdk",
          "cachedResultName": "Copy of Company Decision Maker Discovery"
        }
      },
      "typeVersion": 4.5
    },
    {
      "id": "cb216a07-a75b-46a5-83b7-57c850a1dc69",
      "name": "Loop Over Items For Bulk Enrichment (10 per batch)",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        1400,
        520
      ],
      "parameters": {
        "options": {},
        "batchSize": 10
      },
      "typeVersion": 3
    },
    {
      "id": "1472e5a7-22d1-4a04-ab17-4a7dad6d0679",
      "name": "Determine Contact's Department",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        800,
        520
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini",
          "cachedResultName": "GPT-4O-MINI"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "content": "=Given the job title \"{{ $json.title }}\", determine the most appropriate department within a company. Respond with only the department name. Don't include \"Department\"; e.g. say Sales instead of Sales Department.\n"
            }
          ]
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "5ae52935-7e99-4903-addd-a7e5acbba513",
      "name": "Apollo Organization Search",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -1340,
        640
      ],
      "parameters": {
        "url": "https://api.apollo.io/api/v1/mixed_companies/search",
        "method": "POST",
        "options": {},
        "sendQuery": true,
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"your-api-key\"\n}",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "queryParameters": {
          "parameters": [
            {
              "name": "q_organization_name",
              "value": "={{ $json['Company Name'] }}"
            }
          ]
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "2afafc0c-b991-4f1c-869b-294dae2b41e5",
      "name": "Add Company Website",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -1120,
        640
      ],
      "parameters": {
        "columns": {
          "value": {
            "Phone": "=",
            "Domain": "={{ $json.organizations[0].primary_domain }}",
            "Twitter": "=",
            "Website": "={{ $json.organizations[0].website_url }}",
            "Facebook": "=",
            "Industry": "=",
            "LinkedIn": "=",
            "Revenue ($)": "=",
            "Company Name": "={{ $json.organizations[0].name }}",
            "Founded Year": "=",
            "Headquarters": "=",
            "Total Funding": "=",
            "Company Description": "=",
            "Latest Funding Stage": "=",
            "Company Size (Employees)": "=",
            "Lastest Funding Round Date": "="
          },
          "schema": [
            {
              "id": "Company Name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Website",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Website",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Twitter",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Twitter",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Facebook",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Facebook",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Phone",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Industry",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Industry",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Size (Employees)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Size (Employees)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Headquarters",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Headquarters",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Founded Year",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Founded Year",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Revenue ($)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Revenue ($)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Total Funding",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Total Funding",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Latest Funding Stage",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Latest Funding Stage",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lastest Funding Round Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Lastest Funding Round Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Description",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company Description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Company Summary",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Company Summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Domain"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "appendOrUpdate",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=0",
          "cachedResultName": "Companies"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit?usp=drivesdk",
          "cachedResultName": "Copy of Company Decision Maker Discovery"
        }
      },
      "typeVersion": 4.5
    },
    {
      "id": "b56cb966-8a67-433a-aea7-1e338fede0c1",
      "name": "Approve Company Website",
      "type": "n8n-nodes-base.slack",
      "position": [
        -800,
        600
      ],
      "webhookId": "830f75dd-f56e-4086-90ac-72ca14e226ce",
      "parameters": {
        "select": "channel",
        "message": "Please review the Companies tab of the spreadsheet (https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit?gid=0#gid=0) to verify that the correct domain names were retrieved. If needed, simply find and paste correct website URL of the company in the Website column (the Domain column will be populated automatically).",
        "options": {},
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "C08PU1SKSKF",
          "cachedResultName": "n8n-messages"
        },
        "operation": "sendAndWait",
        "authentication": "oAuth2"
      },
      "typeVersion": 2.3
    },
    {
      "id": "1cc56d46-ae09-4f6a-97c7-da53acce7cb4",
      "name": "Add Company Details",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        140,
        800
      ],
      "parameters": {
        "columns": {
          "value": {
            "Phone": "={{ $json.organization.sanitized_phone ?? '' }}",
            "Domain": "={{ $('Apollo Organization Enrichment').item.json.organization.primary_domain }}",
            "Status": "Processed",
            "Twitter": "={{ $('Apollo Organization Enrichment').item.json.organization.twitter_url }}",
            "Website": "={{ $('Apollo Organization Enrichment').item.json.organization.website_url }}",
            "Facebook": "={{ $('Apollo Organization Enrichment').item.json.organization.facebook_url }}",
            "Industry": "={{ $('Apollo Organization Enrichment').item.json.organization.industries.join(\", \") }}",
            "LinkedIn": "={{ $('Apollo Organization Enrichment').item.json.organization.linkedin_url }}",
            "Revenue ($)": "={{ $('Apollo Organization Enrichment').item.json.organization.annual_revenue ?? '' }}",
            "Company Name": "={{ $('Apollo Organization Enrichment').item.json.organization.name }}",
            "Founded Year": "={{ $('Apollo Organization Enrichment').item.json.organization.founded_year }}",
            "Headquarters": "={{ $('Apollo Organization Enrichment').item.json.organization.raw_address }}",
            "Total Funding": "={{ $('Apollo Organization Enrichment').item.json.organization.total_funding }}",
            "Company Description": "={{ $('Apollo Organization Enrichment').item.json.organization.short_description }}",
            "GPT Company Summary": "={{ $json.message.content }}",
            "Latest Funding Stage": "={{ $('Apollo Organization Enrichment').item.json.organization.latest_funding_stage }}",
            "Company Size (Employees)": "={{ $('Apollo Organization Enrichment').item.json.organization.estimated_num_employees }}",
            "Lastest Funding Round Date": "={{ \n  $('Apollo Organization Enrichment').item.json.organization.latest_funding_round_date &&\n  DateTime.fromISO($('Apollo Organization Enrichment').item.json.organization.latest_funding_round_date).isValid\n    ? DateTime.fromISO($('Apollo Organization Enrichment').item.json.organization.latest_funding_round_date).toFormat('yyyy-MM-dd')\n    : ''\n}}"
          },
          "schema": [
            {
              "id": "Company Name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Website",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Website",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Twitter",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Twitter",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Facebook",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Facebook",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Phone",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Industry",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Industry",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Size (Employees)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Size (Employees)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Headquarters",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Headquarters",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Founded Year",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Founded Year",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Revenue ($)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Revenue ($)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Total Funding",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Total Funding",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Latest Funding Stage",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Latest Funding Stage",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lastest Funding Round Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Lastest Funding Round Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Description",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company Description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Company Summary",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Company Summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Domain"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "appendOrUpdate",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=0",
          "cachedResultName": "Companies"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit?usp=drivesdk",
          "cachedResultName": "Copy of Company Decision Maker Discovery"
        }
      },
      "typeVersion": 4.5
    },
    {
      "id": "3def61fc-c321-45cd-9df4-4e2a1280f9ef",
      "name": "Select Unprocessed Companies",
      "type": "n8n-nodes-base.filter",
      "position": [
        -1780,
        800
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "785952c3-f58e-4d4e-b8c4-dea3ceb424b1",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              },
              "leftValue": "={{ $json.Status }}",
              "rightValue": "Processed"
            }
          ]
        }
      },
      "notesInFlow": false,
      "typeVersion": 2.2
    },
    {
      "id": "7c82c118-cd68-4f3e-ade1-1a048ea20152",
      "name": "Is Domain Already Provided?",
      "type": "n8n-nodes-base.if",
      "position": [
        -1560,
        800
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "9087ca17-f034-4c87-b2b7-4e611ed2bcf5",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              },
              "leftValue": "={{ $json.Domain }}",
              "rightValue": ""
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "56860bd2-8eb6-4db0-9f99-0aaa343b28bc",
      "name": "Summarize Core Business",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        -240,
        800
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini",
          "cachedResultName": "GPT-4O-MINI"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "content": "=Given the company description \"{{ $json[\"Company Description\"] }}\", summarize the companyâ€™s core business in one line.\n"
            }
          ]
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "eb8ff4a6-caf6-4422-a757-c13937f5072e",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -280,
        -20
      ],
      "parameters": {
        "color": 6,
        "width": 700,
        "height": 240,
        "content": "# ğŸ¢ íšŒì‚¬ ì˜ì‚¬ê²°ì •ì íƒìƒ‰\n\nì´ ì›Œí¬í”Œë¡œìš°ëŠ” íšŒì‚¬ ëª©ë¡(ê²€ìƒ‰ ì •í™•ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ ì„ íƒì ìœ¼ë¡œ ì›¹ì‚¬ì´íŠ¸ì™€ í•¨ê»˜)ì„ ì²˜ë¦¬í•˜ê³ , ì„ ë³„ëœ ì˜ì‚¬ê²°ì •ì(ì˜ˆ: CEO, COO, CTO, VP, ì´ì‚¬) ëª©ë¡ê³¼ ê·¸ë“¤ì˜ ì—°ë½ì²˜ ì •ë³´(LinkedIn, ì´ë©”ì¼, ì „í™”)ë¥¼ êµ¬ì¡°í™”ëœ ë¦¬ë“œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤. ë˜í•œ Slack ì±„ë„ì— ì£¼ê°„ ë³´ê³ ì„œë¥¼ ë³´ë‚´, ì§€ë‚œ ì£¼ì— ìƒì„±ëœ í™•ì¸ëœ ë¦¬ë“œì˜ ìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.â€‹\n\nì—¬ê¸° ì´ ì›Œí¬í”Œë¡œìš°ì˜ [Google Sheet](https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit?gid=0#gid=0) í…œí”Œë¦¿ì´ ìˆìŠµë‹ˆë‹¤.\n\nì‹œíŠ¸ì—ì„œ __í™•ì¥ í”„ë¡œê·¸ë¨ > App Script__ì„ í†µí•´ Apps Script ì½”ë“œë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      },
      "typeVersion": 1
    },
    {
      "id": "27d62622-cffa-482b-a093-2d11d83fd2a4",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1920,
        280
      ],
      "parameters": {
        "color": 7,
        "width": 380,
        "height": 400,
        "content": "## âš™ï¸ ì›Œí¬í”Œë¡œ íŠ¸ë¦¬ê±° ğŸ‘‡  \nì£¼ìš” ì›Œí¬í”Œë¡œëŠ” Google Sheetì˜ Companies íƒ­ì— í–‰ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•  ë•Œ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤. íšŒì‚¬ì˜ ì´ë¦„ê³¼ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ë„ë©”ì¸ì€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì—ì„œ ìë™ìœ¼ë¡œ ì¶”ì¶œë©ë‹ˆë‹¤). ëŒ€ì•ˆìœ¼ë¡œ, íšŒì‚¬ ì´ë¦„ë§Œ ì œê³µí•  ìˆ˜ ìˆìœ¼ë©°, Apollo Organization Search APIê°€ ì›¹ì‚¬ì´íŠ¸ë¥¼ ê²€ìƒ‰í•˜ë„ë¡ í•©ë‹ˆë‹¤.  \n\n![ì§„ì…ì ](https://i.postimg.cc/s2DT8K2n/decision-maker-1.png#full-width)"
      },
      "typeVersion": 1
    },
    {
      "id": "508dd949-43b0-4844-832f-99cfc7ffed82",
      "name": "Split Out Batched Decision Maker Response",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        580,
        520
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "people"
      },
      "typeVersion": 1
    },
    {
      "id": "fb97afb4-2e84-4ac3-b3e9-5754ff87c28d",
      "name": "Split Out Batched Enrichment Response",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        1620,
        420
      ],
      "parameters": {
        "options": {},
        "fieldToSplitOut": "matches"
      },
      "typeVersion": 1
    },
    {
      "id": "f62844c7-6c37-47df-9646-48ec0dfeb73e",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1800,
        980
      ],
      "parameters": {
        "color": 7,
        "width": 280,
        "height": 240,
        "content": "### ğŸ”„ ìƒíƒœ ê´€ë¦¬ â˜ï¸  \níšŒì‚¬ë¡œë¶€í„° ì˜ë„í•˜ì§€ ì•Šì€ ì¤‘ë³µ ë¦¬ë“œ ì¶”ì¶œì„ ë°©ì§€í•˜ê¸° ìœ„í•´, Status ì—´ì˜ ê°’ì´ \"Processed\"ê°€ ì•„ë‹Œ íšŒì‚¬ë§Œ ê²€ìƒ‰í•˜ë„ë¡ í•„í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. 'Processed' íšŒì‚¬ì˜ ì›¹ì‚¬ì´íŠ¸ê°€ ìˆ˜ì •ë˜ë©´, Apps Script í•¨ìˆ˜ë¥¼ í†µí•´ êµ¬ì„±ëœ ëŒ€ë¡œ ìƒíƒœê°€ \"Pending\"ìœ¼ë¡œ ë‹¤ì‹œ ë³€ê²½ë©ë‹ˆë‹¤."
      },
      "typeVersion": 1
    },
    {
      "id": "5c688ca9-eea6-4322-9ed2-a8caeb7f3ac1",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -480,
        1000
      ],
      "parameters": {
        "color": 7,
        "width": 400,
        "height": 180,
        "content": "### ğŸ¢ Company Enrichment â˜ï¸  \nìŠ¤í”„ë ˆë“œì‹œíŠ¸ì— íšŒì‚¬ ë„ë©”ì¸ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°, Apollo Organization Enrichment ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ íšŒì‚¬ì— ëŒ€í•œ ì„¸ë¶€ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤. ì´í›„, LLMì„ í†µí•´ ê° íšŒì‚¬ì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ì— ëŒ€í•œ í•œ ì¤„ ìš”ì•½ì„ ìƒì„±í•˜ê³ , ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì˜ Companies íƒ­ì— ì±„ìš°ë©°, ìƒíƒœë¥¼ \"Processed\"ë¡œ ì„¤ì •í•©ë‹ˆë‹¤."
      },
      "typeVersion": 1
    },
    {
      "id": "1ab9bcc2-de96-42ba-a4d7-c08fbbe6f5d6",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        340,
        1100
      ],
      "parameters": {
        "color": 7,
        "width": 420,
        "height": 220,
        "content": "### ğŸ‘¥ ì˜ì‚¬ê²°ì •ì ë°œê²¬ â˜ï¸  \nìš°ë¦¬ëŠ” Apollo People Search ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ íšŒì‚¬ë“¤ì˜ ì˜ì‚¬ê²°ì •ìë¥¼ ì°¾ìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ëŠ” q_organization_domains_list[]ë¡œ, ë‹¨ì¼ ìš”ì²­ì—ì„œ ìµœëŒ€ 1,000ê°œì˜ ë„ë©”ì¸ì„ ìˆ˜ìš©í•©ë‹ˆë‹¤. 1,000ê°œ ì´ìƒì˜ íšŒì‚¬ê°€ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìˆ˜ìš©í•˜ê¸° ìœ„í•´, ìš°ë¦¬ëŠ” API í˜¸ì¶œì„ ë°°ì¹˜ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤(ê° ë°°ì¹˜ë‹¹ 1,000ê°œ) ê·¸ë¦¬ê³  ê° ë°°ì¹˜ì— ëŒ€í•´ Code ë…¸ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ê²€ìƒ‰ URLì„ ë™ì ìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤."
      },
      "typeVersion": 1
    },
    {
      "id": "c841dc57-39b6-450c-8852-5391585b94df",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        540,
        360
      ],
      "parameters": {
        "color": 7,
        "width": 440,
        "height": 140,
        "content": "### ğŸ§  ë°ì´í„° ì²˜ë¦¬ ë° Upsertion ğŸ‘‡  \në¶„í•  ì¶œë ¥ ë…¸ë“œëŠ” ë°°ì¹˜ëœ API ì‘ë‹µì˜ ì²˜ë¦¬ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ê° ì˜ì‚¬ ê²°ì •ìì˜ ë¶€ì„œë¥¼ ê·¸ë“¤ì˜ ì§ê¸‰ì„ ê¸°ë°˜ìœ¼ë¡œ LLM í˜¸ì¶œì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•˜ê³ , ê²°ê³¼ë¥¼ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì˜ Contacts íƒ­ì— ì—…ì„œíŠ¸í•©ë‹ˆë‹¤."
      },
      "typeVersion": 1
    },
    {
      "id": "d04f3f78-2023-4e13-935f-b799e5d9e884",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1340,
        940
      ],
      "parameters": {
        "color": 7,
        "width": 440,
        "height": 200,
        "content": "ğŸ“§ Contact Enrichment â˜ï¸  \nApollo People Search ì—”ë“œí¬ì¸íŠ¸ê°€ ì´ë©”ì¼ ì£¼ì†Œì™€ ì „í™”ë²ˆí˜¸ë¥¼ ê²€ìƒ‰í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, Bulk People Enrichment ì—”ë“œí¬ì¸íŠ¸ì— ì¶”ê°€ í˜¸ì¶œì„ í•˜ì—¬ ë‹¨ì¼ API í˜¸ì¶œë¡œ ìµœëŒ€ 10ëª…ì˜ ì‚¬ëŒì— ëŒ€í•œ ë°ì´í„°ë¥¼ í’ë¶€í•˜ê²Œ í•©ë‹ˆë‹¤. Code ë…¸ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê° 10ëª… ë°°ì¹˜ì— ëŒ€í•œ ë™ì  ì—”ë“œí¬ì¸íŠ¸ URLì„ êµ¬ì„±í•˜ê³ , ë°°ì¹˜ëœ í’ë¶€í•œ ì‘ë‹µ ë°ì´í„°ë¥¼ ë¶„í• í•˜ë©°, Contacts íƒ­ì„ ë‹¤ì‹œ upsert í•©ë‹ˆë‹¤."
      },
      "typeVersion": 1
    },
    {
      "id": "5d4c88b5-9102-44c3-b0a9-59c18e744417",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2020,
        320
      ],
      "parameters": {
        "color": 4,
        "width": 280,
        "height": 260,
        "content": "### âœ… í™•ì¸ëœ ì—°ë½ì²˜ í•„í„°ë§\nì´ ë‹¨ê³„ì—ì„œ, Contacts íƒ­ì—ëŠ” í™•ì¸ëœ ì´ë©”ì¼ ì£¼ì†Œì™€ í™•ì¸ë˜ì§€ ì•Šì€ ì´ë©”ì¼ ì£¼ì†Œê°€ ëª¨ë‘ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” Contacts (Verified) íƒ­ì˜ A2 ì…€ì—ì„œ ë‹¤ìŒ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬ í™•ì¸ëœ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ê°€ì§„ ì—°ë½ì²˜ë§Œ í•„í„°ë§í•˜ê³  ì„ íƒí•©ë‹ˆë‹¤: __=FILTER(Contacts!A2:M, Contacts!L2:L = \"Yes\")__"
      },
      "typeVersion": 1
    },
    {
      "id": "a9ff1d43-7eb8-4bad-87b5-bff8d1e7df99",
      "name": "Send Weekly Report",
      "type": "n8n-nodes-base.slack",
      "position": [
        -1360,
        1420
      ],
      "webhookId": "4323a085-01ed-415e-98d0-d176b96767aa",
      "parameters": {
        "text": "={{ $json.message }}",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "C08PU1SKSKF",
          "cachedResultName": "n8n-messages"
        },
        "otherOptions": {
          "includeLinkToWorkflow": true
        },
        "authentication": "oAuth2"
      },
      "typeVersion": 2.3
    },
    {
      "id": "ebe891a3-c999-4fdf-923e-4cbcdd73c17e",
      "name": "Retrieve Verified Leads",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -1800,
        1420
      ],
      "parameters": {
        "options": {},
        "filtersUI": {
          "values": [
            {
              "lookupValue": "Yes",
              "lookupColumn": "Email Verified"
            }
          ]
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 1337643228,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=1337643228",
          "cachedResultName": "Contacts (Verified)"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit?usp=drivesdk",
          "cachedResultName": "Company Decision Maker Discovery"
        }
      },
      "typeVersion": 4.5,
      "alwaysOutputData": true
    },
    {
      "id": "80b3eb7e-a895-4a65-b63d-9834374cf49a",
      "name": "Derive Past Week's Lead Gen. Metrics",
      "type": "n8n-nodes-base.code",
      "position": [
        -1580,
        1420
      ],
      "parameters": {
        "jsCode": "// Extract all items from the input\nconst items = $input.all();\n\n// Initialize Sets to store unique company domains and email addresses\nconst uniqueCompanies = new Set();\nconst uniqueEmails = new Set();\n\n// Iterate through each item to populate the Sets\nfor (const item of items) {\n  const domain = item.json['Company Domain'];\n  const email = item.json['Email Address'];\n\n  if (domain) uniqueCompanies.add(domain);\n  if (email) uniqueEmails.add(email);\n}\n\n// Create the summary message\nconst message = `This week we discovered ${uniqueEmails.size} decision makers from ${uniqueCompanies.size} companies.`;\n\n// Return the message as output\nreturn [\n  {\n    json: {\n      message,\n      companies: uniqueCompanies.size,\n      contacts: uniqueEmails.size,\n    },\n  },\n];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "617f0387-eec0-4695-a0b1-79a33ce6c6d5",
      "name": "Weekly Report Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -2020,
        1420
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [
                5
              ]
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "60bed78a-8236-4193-904e-b5daa51763fa",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1820,
        1620
      ],
      "parameters": {
        "color": 4,
        "width": 560,
        "height": 260,
        "content": "ğŸ“Š ì£¼ê°„ ë³´ê³  â˜ï¸\n\nì´ ë‹¨ê³„ëŠ” ë§¤ì£¼ ìë™ìœ¼ë¡œ ìš”ì•½ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì§€ë‚œ 7ì¼ ë™ì•ˆ ë°œê²¬ëœ ìƒˆë¡œìš´ ê²€ì¦ëœ ë¦¬ë“œì˜ ìˆ˜ë¥¼ ë³´ê³ í•©ë‹ˆë‹¤."
      },
      "typeVersion": 1
    },
    {
      "id": "d68afbc7-1a31-4da4-a074-464ab90a6596",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -960,
        200
      ],
      "parameters": {
        "color": 7,
        "width": 340,
        "height": 380,
        "content": "### ğŸ§‘â€ğŸ’¼ ì¸ê°„-ë£¨í”„ ê²€ì¦ ğŸ‘‡\nê²€ìƒ‰ëœ ì›¹ì‚¬ì´íŠ¸ê°€ í•­ìƒ ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, Slackì„ í†µí•œ ì¸ê°„-ë£¨í”„ ë‹¨ê³„ê°€ í•„ìš”í•©ë‹ˆë‹¤. ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì— ë°˜í™˜ëœ ì›¹ì‚¬ì´íŠ¸ë¥¼ ê²€ì¦í•˜ê³ , í•„ìš” ì‹œ ìˆ˜ì •í•˜ë©°, ìŠ¹ì¸í•©ë‹ˆë‹¤.\n\n![slack-approve.png](https://i.postimg.cc/J0FnVRZT/slack-approve.png#full-width)\n\n### ì¶œë ¥"
      },
      "typeVersion": 1
    },
    {
      "id": "cfed40fb-42bf-4d8b-a4d2-c161aeebacd3",
      "name": "Merge Rows Which Now All Contain Domains",
      "type": "n8n-nodes-base.merge",
      "position": [
        -680,
        800
      ],
      "parameters": {},
      "typeVersion": 3.1
    }
  ],
  "pinData": {},
  "connections": {
    "Add Contacts": {
      "main": [
        [
          {
            "node": "Loop Over Items For Bulk Enrichment (10 per batch)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Company Details": {
      "main": [
        [
          {
            "node": "Loop Over Items (1000 per Batch)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Company Website": {
      "main": [
        [
          {
            "node": "Approve Company Website",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge Rows Which Now All Contain Domains",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets Trigger": {
      "main": [
        [
          {
            "node": "Select Unprocessed Companies",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Weekly Report Trigger": {
      "main": [
        [
          {
            "node": "Retrieve Verified Leads",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retrieve Verified Leads": {
      "main": [
        [
          {
            "node": "Derive Past Week's Lead Gen. Metrics",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarize Core Business": {
      "main": [
        [
          {
            "node": "Add Company Details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apollo Organization Search": {
      "main": [
        [
          {
            "node": "Add Company Website",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apollo Find Decision Makers": {
      "main": [
        [
          {
            "node": "Loop Over Items (1000 per Batch)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is Domain Already Provided?": {
      "main": [
        [
          {
            "node": "Merge Rows Which Now All Contain Domains",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "Apollo Organization Search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Select Unprocessed Companies": {
      "main": [
        [
          {
            "node": "Is Domain Already Provided?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apollo Enrich Decision Makers": {
      "main": [
        [
          {
            "node": "Loop Over Items For Bulk Enrichment (10 per batch)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apollo Organization Enrichment": {
      "main": [
        [
          {
            "node": "Summarize Core Business",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Determine Contact's Department": {
      "main": [
        [
          {
            "node": "Add Contacts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Apollo People Search URL": {
      "main": [
        [
          {
            "node": "Apollo Find Decision Makers",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items (1000 per Batch)": {
      "main": [
        [
          {
            "node": "Split Out Batched Decision Maker Response",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Create Apollo People Search URL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Derive Past Week's Lead Gen. Metrics": {
      "main": [
        [
          {
            "node": "Send Weekly Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Batched Enrichment Response": {
      "main": [
        [
          {
            "node": "Enrich Contacts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Apollo People Enrichment Payload": {
      "main": [
        [
          {
            "node": "Apollo Enrich Decision Makers",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Rows Which Now All Contain Domains": {
      "main": [
        [
          {
            "node": "Apollo Organization Enrichment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Batched Decision Maker Response": {
      "main": [
        [
          {
            "node": "Determine Contact's Department",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items For Bulk Enrichment (10 per batch)": {
      "main": [
        [
          {
            "node": "Split Out Batched Enrichment Response",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Create Apollo People Enrichment Payload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}