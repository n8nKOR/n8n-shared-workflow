{
  "meta": {
    "instanceId": "21754f977ce20b07e6fe64be3fbc663f6e6f730423d6e46c6cd2bf5b5e70a383"
  },
  "nodes": [
    {
      "id": "0c8b3a80-00e1-4d69-aac9-df41a464914a",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -246.5549467302767,
        -396.60463598587717
      ],
      "parameters": {
        "width": 2260.4312974923314,
        "height": 1739.059401992624,
        "content": "ì•„ì›ƒí’‹"
      },
      "typeVersion": 1
    },
    {
      "id": "74ee38b2-2d8a-40bf-8dad-e20125f000f7",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -220,
        -340
      ],
      "parameters": {
        "color": 5,
        "width": 644.910132006371,
        "height": 655.8676264589326,
        "content": "### í”„ë¡œì íŠ¸ í˜œíƒ ğŸ§ğŸŒŸ\n\nì´ ë©‹ì§„ í”„ë¡œì íŠ¸ì˜ ëª©í‘œëŠ” \"CATEGORY_PROMOTIONS\" ì´ë©”ì¼ì„ ìŠˆí¼ ë©‹ì§„ ì˜¤ë””ì˜¤ íŒŸìºìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤! ğŸ™ï¸ ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìëŠ” í™”ë©´ì„ ë“¤ì—¬ë‹¤ë³´ì§€ ì•Šê³ ë„ í”„ë¡œëª¨ì…˜ ì½˜í…ì¸ ë¥¼ í¸ì•ˆí•˜ê²Œ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì½ëŠ” ëŒ€ì‹  ë“£ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ìëŠ” ì¬ë¯¸ìˆê³  ì‰½ê²Œ ì •ë³´ë¥¼ í¡ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ í”„ë¡œì íŠ¸ëŠ” n8nì„ ì‚¬ìš©í•´ ì‘ì—…ì„ ìë™í™”í•˜ëŠ” ë©‹ì§„ ì›Œí¬í”Œë¡œë¥¼ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤. ì›Œí¬í”Œë¡œì˜ ê° ë…¸ë“œê°€ ë¶€ë“œëŸ½ê²Œ ì—­í• ì„ í•©ë‹ˆë‹¤. ì£¼ìš” í”Œë ˆì´ì–´ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”:\n\n1. **Gmail trigger1 Node**: ë§¤ ë¶„ë§ˆë‹¤ \"CATEGORY_PROMOTIONS\" ì´ë©”ì¼ì— ëŒ€í•´ ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤.\n   \n2. **Get message content1 Node**: ì´ë©”ì¼ ì½˜í…ì¸ ë¥¼ ê°€ì ¸ì™€ ë§ˆë²•ì„ ë¶€ë¦½ë‹ˆë‹¤.\n      \n3. **Summarization Chain3 Node**: ë©‹ì§„ ìš”ì•½ì„ ë§Œë“¤ê¸° ìœ„í•´ ê³ ê¸‰ ì²­í‚¹ ë°©ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n   \n4. **Delete the unnecessary items Node**: ì´ë©”ì¼ ì½˜í…ì¸ ì—ì„œ ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì„ ì œê±°í•©ë‹ˆë‹¤.\n   \n5. **Text to Free TTS Node**: ìš”ì•½ì„ ìŒì„±ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ Free TTS ë§ˆë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n   \n6. **Convert from base64 to File Node**: ì˜¤ë””ì˜¤ë¥¼ íŒŒì¼ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n   \n7. **Merge Text with Audio Node**: í…ìŠ¤íŠ¸ì™€ ì˜¤ë””ì˜¤ë¥¼ ê²°í•©í•´ ë©‹ì§„ ì¡°í•©ì„ ë§Œë“­ë‹ˆë‹¤.\n   \n8. **Aggregate in same cell Node**: ëª¨ë“  ë°ì´í„°ë¥¼ í•¨ê»˜ ëª¨ì•„ ë” ë©‹ì§€ê²Œ ë§Œë“­ë‹ˆë‹¤.\n   \n10. **Send Message to Telegram Node**: ìµœì¢… ì˜¤ë””ì˜¤ ë©”ì‹œì§€ë¥¼ ìº¡ì…˜ê³¼ í•¨ê»˜ íŠ¹ë³„í•œ Telegram ì±„íŒ… IDë¡œ ë³´ëƒ…ë‹ˆë‹¤.\n\nì´ ì›Œí¬í”Œë¡œëŠ” ì˜ ê¸°ë¦„ì¹ ëœ ê¸°ê³„ì²˜ëŸ¼ ê° ë‹¨ê³„ê°€ ë¶€ë“œëŸ½ê²Œ ì´ì–´ì§‘ë‹ˆë‹¤. ì´ëŸ¬í•œ ì‘ì—…ì„ ìë™í™”í•˜ì—¬ ì´ í”„ë¡œì íŠ¸ëŠ” ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì‰½ê²Œ ë§Œë“¤ê³  ëª¨ë“  ê´€ë ¨ìì—ê²Œ ê¸°ì¨ì„ ê°€ì ¸ë‹¤ì£¼ë ¤ í•©ë‹ˆë‹¤! ğŸŒˆâœ¨ğŸš€"
      },
      "typeVersion": 1
    },
    {
      "id": "07a4dc07-0109-464e-a661-d5a4bb7b4a1c",
      "name": "Get message content1",
      "type": "n8n-nodes-base.gmail",
      "position": [
        640,
        460
      ],
      "parameters": {
        "simple": false,
        "options": {},
        "messageId": "={{ $json.id }}",
        "operation": "get"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "UJx4Tiq8WRtxWEIP",
          "name": "Gmail Omar"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "283dcd8b-80a8-4e49-aba1-fabec333def3",
      "name": "OpenAI Chat Model3",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        1120,
        640
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "6u6TSayQDxci71Wb",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "71897790-5ee8-4f15-bc4e-26a987b79505",
      "name": "Delete the unnecessary items",
      "type": "n8n-nodes-base.code",
      "position": [
        880,
        460
      ],
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n delete item.json.threadId;\n delete item.json.labelIds;\n delete item.json.sizeEstimate;\n delete item.json.headers;\n delete item.json.html;\n delete item.json.to;\n delete item.json.cc;\n delete item.json.replyTo;\n delete item.json.messageId;\n delete item.json.id;\n delete item.json.textAsHtml;\n delete item.json.date;\n\n}\n\nreturn $input.all();"
      },
      "typeVersion": 2
    },
    {
      "id": "187704ba-ddc1-447e-99f6-8335b039dca3",
      "name": "Aggregate in same cell",
      "type": "n8n-nodes-base.aggregate",
      "position": [
        1400,
        660
      ],
      "parameters": {
        "options": {
          "includeBinaries": true
        },
        "aggregate": "aggregateAllItemData"
      },
      "typeVersion": 1
    },
    {
      "id": "a8cba2a0-e751-4dc4-8cc1-9b91c587b1bc",
      "name": "Gmail trigger",
      "type": "n8n-nodes-base.gmailTrigger",
      "position": [
        440,
        460
      ],
      "parameters": {
        "simple": false,
        "filters": {
          "labelIds": [
            "CATEGORY_PROMOTIONS"
          ]
        },
        "options": {},
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        }
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "UJx4Tiq8WRtxWEIP",
          "name": "Gmail Omar"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "7d170a4c-601e-49da-a834-2a40f992feff",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1380,
        -340
      ],
      "parameters": {
        "color": 5,
        "width": 478.42665735513924,
        "height": 651.7534899914576,
        "content": "ì´ APIëŠ” ìë™ í…ìŠ¤íŠ¸-ìŒì„± ìƒì„±ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì§€ì •ëœ ë§í¬ë¡œ POST ìš”ì²­ì„ ë³´ë‚´ê³ , ìŒì„±ìœ¼ë¡œ ë³€í™˜í•  í…ìŠ¤íŠ¸ë¥¼ í¬í•¨í•œ JSON ë°ì´í„°ë¥¼ í¬í•¨í•˜ë©°, ì„ í˜¸í•˜ëŠ” ìŒì„±ì„ ì„ íƒí•˜ì—¬ ì´ APIë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ APIë¥¼ ì‚¬ìš©í•  ë•Œ, ìš”ì²­ ë°ì´í„°ì˜ ì ì ˆí•œ í•´ì„ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ `Content-Type` í—¤ë”ì— `application/json` ê°’ì„ í¬í•¨í•˜ì„¸ìš”.\n\nì´ APIëŠ” ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ë©°, ì›í•˜ëŠ” í…ìŠ¤íŠ¸ë¥¼ ì œì¶œí•˜ê³  ì ì ˆí•œ ìŒì„±ì„ ì„ íƒí•˜ë©´ ìƒì„±ëœ ìŒì„±ì´ í¬í•¨ëœ ì˜¤ë””ì˜¤ íŒŒì¼ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ APIë¥¼ ì‚¬ìš©í•˜ë©´ í…ìŠ¤íŠ¸ì— ëŒ€í•œ ì˜¤ë””ì˜¤ í´ë¦½ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë¹ ë¥´ê²Œ ìƒì„±í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.\n\nì´ APIì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê³³ì€ [https://tiktok-tts.weilnet.workers.dev/api/generation] ë˜ëŠ” [https://tiktokvoicegenerator.com/](https://tiktokvoicegenerator.com/)ì—ì„œ ì œê³µë˜ëŠ” ëŒ€ë¡œ ë³€ê²½ ì—†ì´ ìœ ì§€í•˜ì„¸ìš”."
      },
      "typeVersion": 1
    },
    {
      "id": "f0809138-4bde-4132-97b2-0810b920ed7a",
      "name": "Convert from base64 to File",
      "type": "n8n-nodes-base.convertToFile",
      "position": [
        1660,
        140
      ],
      "parameters": {
        "options": {},
        "operation": "toBinary",
        "sourceProperty": "data"
      },
      "typeVersion": 1.1
    },
    {
      "id": "2efdd685-57fe-4f5c-b295-183dddfeb0d6",
      "name": "Merge Text with Audio",
      "type": "n8n-nodes-base.merge",
      "position": [
        1720,
        440
      ],
      "parameters": {},
      "typeVersion": 2.1
    },
    {
      "id": "c59a00fd-c7c7-4dc5-91d1-492bd7715731",
      "name": "Send Message to Telegram",
      "type": "n8n-nodes-base.telegram",
      "position": [
        1720,
        660
      ],
      "parameters": {
        "chatId": "53739339",
        "operation": "sendAudio",
        "binaryData": true,
        "additionalFields": {
          "caption": "={{ $json.data[1].response.text }}",
          "fileName": "New Message on Gmail"
        },
        "binaryPropertyName": "=data"
      },
      "credentials": {
        "telegramApi": {
          "id": "inUwZEIEWHK1poKe",
          "name": "aqsati services"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "3f3a1209-9787-41c3-af10-3f3e44a89c9b",
      "name": "Summarization Chain3",
      "type": "@n8n/n8n-nodes-langchain.chainSummarization",
      "position": [
        1120,
        460
      ],
      "parameters": {
        "options": {
          "summarizationMethodAndPrompts": {
            "values": {
              "prompt": "Craft a concise newsletter using the given content. Include emojis, avoid starting with the subject word, summarize linked articles briefly, and ensure it's under 247 characters for easy TTS readability, and after that chick if it's very short to pass it:\n\n\n\n\"{text}\"\n\n\n",
              "combineMapPrompt": "Craft a concise newsletter using the given content. Include emojis, avoid starting with the subject word, summarize linked articles briefly, and ensure it's under 247 characters for easy TTS readability, and after that chick if it's very short to pass it:\n\n\n\"{text}\"\n\n\n"
            }
          }
        },
        "chunkingMode": "advanced"
      },
      "typeVersion": 2
    },
    {
      "id": "f1e063a5-0e0e-4f8e-b8bc-e940db622843",
      "name": "Text to  TTS",
      "type": "n8n-nodes-base.httpRequest",
      "onError": "continueErrorOutput",
      "position": [
        1460,
        140
      ],
      "parameters": {
        "url": "https://tiktok-tts.weilnet.workers.dev/api/generation",
        "method": "POST",
        "options": {
          "allowUnauthorizedCerts": true
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "text",
              "value": "={{ $json.response.text }}"
            },
            {
              "name": "voice",
              "value": "en_us_001"
            }
          ]
        }
      },
      "retryOnFail": false,
      "typeVersion": 4.1,
      "alwaysOutputData": false
    },
    {
      "id": "c6f9e191-31a0-4ec7-aa11-8f615074b884",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -220,
        340
      ],
      "parameters": {
        "color": 5,
        "width": 821.8034694793512,
        "height": 987.2767141363915,
        "content": "### Gmail íŠ¸ë¦¬ê±°:\nN8N ì›Œí¬í”Œë¡œìš°ì—ì„œ Gmail Trigger ë…¸ë“œëŠ” ë§¤ ë¶„ë§ˆë‹¤ ìƒˆ ì´ë©”ì¼ì„ í´ë§í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©°, ì›Œí¬í”Œë¡œìš°ë¥¼ íŠ¸ë¦¬ê±°í•˜ê¸° ì „ì— \"CATEGORY_PROMOTIONS\" ë ˆì´ë¸”ì´ ìˆëŠ” ì´ë©”ì¼ì„ í•„í„°ë§í•˜ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n### Gmail Trigger ë…¸ë“œ ë‚´ì—ì„œ í•„í„° ì‚¬ìš© ë‹¨ê³„:\n1. **Gmail Trigger ë…¸ë“œ ì¶”ê°€**:\n   - ì›Œí¬í”Œë¡œìš° ìº”ë²„ìŠ¤ì— Gmail Trigger ë…¸ë“œë¥¼ ë“œë˜ê·¸ ì•¤ ë“œë¡­í•©ë‹ˆë‹¤.\n\n\\```javascript\n// Gmail Trigger ë…¸ë“œ ì¶”ê°€\n\\```\n\n2. **Gmail Trigger ë…¸ë“œ êµ¬ì„±**:\n   - ë…¸ë“œ êµ¬ì„±ì—ì„œ:\n     - \"Poll Times\"ì„ \"Every Minute\"ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì •ê¸°ì ìœ¼ë¡œ ìƒˆ ì´ë©”ì¼ì„ í™•ì¸í•©ë‹ˆë‹¤.\n     - \"Simple\" í† ê¸€ì„ í™œì„±í™”í•˜ì—¬ ë…¸ë“œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°„ë‹¨í•˜ê²Œ í•˜ë ¤ë©´ í™œì„±í™”í•©ë‹ˆë‹¤.\n     - \"Filters\" ì•„ë˜ì—ì„œ í•„í„°ë§í•  ë ˆì´ë¸” IDë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì´ ê²½ìš° \"CATEGORY_PROMOTIONS\"ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.\n     - í•„ìš”í•œ ì¶”ê°€ ì˜µì…˜ì„ ì¡°ì •í•©ë‹ˆë‹¤.\n\n\\```javascript\n// Gmail Trigger ë…¸ë“œ êµ¬ì„±\npollTimes: {\n  item: [\n    {\n      mode: \"everyMinute\"\n    }\n  ]\n},\nsimple: false,\nfilters: {\n  labelIds: [\n    \"CATEGORY_PROMOTIONS\"\n  ]\n},\noptions: {}\n\\```\n\n3. **ìê²© ì¦ëª… ì œê³µ**:\n   - í•„ìš”í•œ Gmail ìê²© ì¦ëª…ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ê²½ìš° ID \"UJx4Tiq8WRtxWEIP\"ì™€ ì´ë¦„ \"Gmail Omar\"ì„ ì‚¬ìš©í•˜ëŠ” Gmail OAuth2ì…ë‹ˆë‹¤.\n\n4. **ì €ì¥ ë° ì‹¤í–‰**:\n   - ì›Œí¬í”Œë¡œìš°ë¥¼ ì €ì¥í•˜ê³  ì‹¤í–‰í•˜ì—¬ ì§€ì •ëœ ë ˆì´ë¸” í•„í„°ê°€ ìˆëŠ” ìƒˆ ì´ë©”ì¼ì„ Gmail ê³„ì •ì—ì„œ ëª¨ë‹ˆí„°ë§í•˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ ë‹¨ê³„ë¥¼ ë”°ë¥´ë©´, ì›Œí¬í”Œë¡œìš°ëŠ” Gmail ê³„ì •ì—ì„œ \"CATEGORY_PROMOTIONS\" ë ˆì´ë¸”ê³¼ ì¼ì¹˜í•˜ëŠ” ìƒˆ ì´ë©”ì¼ì— ë”°ë¼ íš¨ê³¼ì ìœ¼ë¡œ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤."
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Text to  TTS": {
      "main": [
        [
          {
            "node": "Convert from base64 to File",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Summarization Chain3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail trigger": {
      "main": [
        [
          {
            "node": "Get message content1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Summarization Chain3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get message content1": {
      "main": [
        [
          {
            "node": "Delete the unnecessary items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarization Chain3": {
      "main": [
        [
          {
            "node": "Merge Text with Audio",
            "type": "main",
            "index": 1
          },
          {
            "node": "Text to  TTS",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Text with Audio": {
      "main": [
        [
          {
            "node": "Aggregate in same cell",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate in same cell": {
      "main": [
        [
          {
            "node": "Send Message to Telegram",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert from base64 to File": {
      "main": [
        [
          {
            "node": "Merge Text with Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete the unnecessary items": {
      "main": [
        [
          {
            "node": "Summarization Chain3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}