{
  "id": "o4sdVtTrkuZXDATf",
  "meta": {
    "instanceId": "31e69f7f4a77bf465b805824e303232f0227212ae922d12133a0f96ffeab4fef",
    "templateCredsSetupCompleted": true
  },
  "name": "âœ¨ğŸ˜ƒAutomated Workflow Backups to Google Drive",
  "tags": [],
  "nodes": [
    {
      "id": "f3eba5f7-534e-4eaa-ac84-850d51ff2936",
      "name": "On clicking 'execute'",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        620,
        -140
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "383e4bed-38ec-4b2f-890c-9b0d9cda8e11",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        1140,
        340
      ],
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "typeVersion": 3
    },
    {
      "id": "38c4c909-fa18-4fa3-abf5-6b9bd2d46718",
      "name": "Every Day",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        620,
        80
      ],
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "67f62b6e-fe37-4638-89ce-9fe1de041282",
      "name": "Create Folder with DateTime Stamp",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        1220,
        -40
      ],
      "parameters": {
        "name": "=n8n-Workflow-Backups-{{ $json.datetime }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "options": {},
        "folderId": {
          "__rl": true,
          "mode": "list",
          "value": "root",
          "cachedResultName": "/ (Root folder)"
        },
        "resource": "folder"
      },
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "UhdXGYLTAJbsa0xX",
          "name": "Google Drive account"
        }
      },
      "typeVersion": 3
    },
    {
      "id": "cfbda56a-2d14-4d64-b40d-89961c0cf0f4",
      "name": "Get DateTIme",
      "type": "n8n-nodes-base.set",
      "position": [
        920,
        -40
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "2589e80c-e8c3-4872-bd7a-d3e92f4a6ab7",
              "name": "datetime",
              "type": "string",
              "value": "={{ $now }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "93e8097f-9e7d-49ff-9133-4fd8590f7e31",
      "name": "Get Workflows",
      "type": "n8n-nodes-base.n8n",
      "position": [
        1520,
        -40
      ],
      "parameters": {
        "filters": {},
        "requestOptions": {}
      },
      "credentials": {
        "n8nApi": {
          "id": "49QOgnBpyVcT7XQF",
          "name": "n8n account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "d848ce1d-beb7-4e25-82ac-ed0e8f9523e0",
      "name": "Limit to 200",
      "type": "n8n-nodes-base.limit",
      "position": [
        1820,
        -40
      ],
      "parameters": {
        "maxItems": 200
      },
      "typeVersion": 1
    },
    {
      "id": "18f61908-97ce-478c-8544-cfedef22a94c",
      "name": "Convert Workflow to JSON File",
      "type": "n8n-nodes-base.convertToFile",
      "position": [
        1400,
        340
      ],
      "parameters": {
        "options": {
          "fileName": "={{ $json.name }}"
        },
        "operation": "toJson"
      },
      "typeVersion": 1.1
    },
    {
      "id": "97690d84-a0cd-4169-83a8-e4f1d189837e",
      "name": "Save JSON File to Google Drive Folder",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        1600,
        340
      ],
      "parameters": {
        "name": "={{ $binary.data.fileName }}.json",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "options": {},
        "folderId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Create Folder with DateTime Stamp').item.json.id }}"
        }
      },
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "UhdXGYLTAJbsa0xX",
          "name": "Google Drive account"
        }
      },
      "typeVersion": 3
    },
    {
      "id": "452c0ce8-6e1f-41d7-a94c-25c7abbc32ad",
      "name": "Execute Once",
      "type": "n8n-nodes-base.noOp",
      "position": [
        980,
        720
      ],
      "parameters": {},
      "executeOnce": true,
      "typeVersion": 1
    },
    {
      "id": "aadc54d7-2458-4b5b-aa65-07aff52626d2",
      "name": "Search Folder Names",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        1180,
        720
      ],
      "parameters": {
        "limit": 10,
        "filter": {
          "whatToSearch": "folders"
        },
        "options": {},
        "resource": "fileFolder",
        "queryString": "n8n-Workflow-Backups"
      },
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "UhdXGYLTAJbsa0xX",
          "name": "Google Drive account"
        }
      },
      "executeOnce": true,
      "typeVersion": 3
    },
    {
      "id": "fcb210bf-4947-4178-b85a-8425eb72d937",
      "name": "Delete Folders",
      "type": "n8n-nodes-base.googleDrive",
      "onError": "continueRegularOutput",
      "position": [
        1600,
        720
      ],
      "parameters": {
        "options": {
          "deletePermanently": true
        },
        "resource": "folder",
        "operation": "deleteFolder",
        "folderNoRootId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $json.id }}"
        }
      },
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "UhdXGYLTAJbsa0xX",
          "name": "Google Drive account"
        }
      },
      "typeVersion": 3,
      "alwaysOutputData": true
    },
    {
      "id": "ccdc0655-75e9-4c6b-8ebb-76477733289b",
      "name": "Complete Message",
      "type": "n8n-nodes-base.telegram",
      "position": [
        960,
        1040
      ],
      "webhookId": "382a3b43-b83f-47b1-a276-67c6b98a441a",
      "parameters": {
        "text": "={{ $now }}\nWorkflows Backup Complete\n{{ $('Create Folder with DateTime Stamp').item.json.name }}\nhttps://drive.google.com/drive/folders/{{ $('Create Folder with DateTime Stamp').item.json.id }}",
        "chatId": "={{ $env.TELEGRAM_CHAT_ID }}",
        "additionalFields": {
          "parse_mode": "HTML",
          "appendAttribution": false
        }
      },
      "credentials": {
        "telegramApi": {
          "id": "pAIFhguJlkO3c7aQ",
          "name": "Telegram account"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "972b4921-803f-4510-9894-9acd2713816a",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1020,
        220
      ],
      "parameters": {
        "color": 5,
        "width": 800,
        "height": 360,
        "content": "ì›Œí¬í”Œë¡œë¥¼ Google Driveì— ì €ì¥"
      },
      "typeVersion": 1
    },
    {
      "id": "254d12e9-0ca6-4953-b375-66a883b44d41",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        840,
        620
      ],
      "parameters": {
        "color": 3,
        "width": 980,
        "height": 300,
        "content": "ê°€ì¥ ìµœê·¼ 7ì¼ì˜ í´ë”ë¥¼ ìœ ì§€í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œí•˜ì„¸ìš”."
      },
      "typeVersion": 1
    },
    {
      "id": "a1f25512-16d1-45e9-8b18-706288543e03",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        840,
        960
      ],
      "parameters": {
        "width": 340,
        "height": 260,
        "content": "## ì‚¬ìš©ìë¥¼ Telegramìœ¼ë¡œ ì•Œë¦¼"
      },
      "typeVersion": 1
    },
    {
      "id": "36182be7-f575-4f28-8d63-39802b8428ba",
      "name": "Find Folders to Delete",
      "type": "n8n-nodes-base.code",
      "position": [
        1400,
        720
      ],
      "parameters": {
        "jsCode": "// Get all input items and sort by name in descending order\nconst sortedItems = $input.all().sort((a, b) => {\n  if (!a.name || !b.name) return 0;\n  return b.name.localeCompare(a.name);\n});\n\n// Get items older than 7 days\nconst olderItems = sortedItems.slice(7);\n\nreturn olderItems\n\n"
      },
      "typeVersion": 2
    },
    {
      "id": "3a31ee24-3d6c-4340-9c5e-bb1c1cce6151",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1740,
        -160
      ],
      "parameters": {
        "width": 260,
        "height": 340,
        "content": "ë””ë²„ê¹… ì œí•œ  \nì‹¤í–‰ ì¤‘ì´ ë˜ë©´ ì´ë¥¼ ì œê±°í•˜ì„¸ìš”"
      },
      "typeVersion": 1
    },
    {
      "id": "df815c43-f6f9-44b8-9503-6a8d0167b844",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1440,
        -160
      ],
      "parameters": {
        "width": 260,
        "height": 340,
        "content": "ëª¨ë“  ì›Œí¬í”Œë¡œìš° ê°€ì ¸ì˜¤ê¸°"
      },
      "typeVersion": 1
    },
    {
      "id": "c0433a5f-7f6c-4af4-bbbb-ca914aeef33f",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1140,
        -160
      ],
      "parameters": {
        "width": 260,
        "height": 340,
        "content": "ìƒˆ Google í´ë” ë§Œë“¤ê¸°"
      },
      "typeVersion": 1
    },
    {
      "id": "adba380e-16c2-4647-a701-9d5cec1baa0f",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        840,
        -160
      ],
      "parameters": {
        "width": 260,
        "height": 340,
        "content": "ë‚ ì§œì‹œê°„ ìŠ¤íƒ¬í”„ ê°€ì ¸ì˜¤ê¸°"
      },
      "typeVersion": 1
    },
    {
      "id": "4041f4fb-2b51-48e7-af55-b7351a52e4ea",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -160,
        -160
      ],
      "parameters": {
        "color": 7,
        "width": 700,
        "height": 1480,
        "content": "# âœ¨ğŸ˜ƒ ìë™í™”ëœ ì›Œí¬í”Œë¡œìš° ë°±ì—… Google Driveë¡œ\n\nì´ ì›Œí¬í”Œë¡œëŠ” n8n ì›Œí¬í”Œë¡œìš°ë¥¼ ë§¤ì¼ Google Driveì— ë°±ì—…í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•©ë‹ˆë‹¤. íƒ€ì„ìŠ¤íƒ¬í”„ê°€ í¬í•¨ëœ í´ë”ë¥¼ ìƒì„±í•˜ê³ , ì›Œí¬í”Œë¡œìš°ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥í•˜ë©°, ì˜¤ë˜ëœ ë°±ì—…ì„ ê´€ë¦¬í•˜ì—¬ ìµœê·¼ 7ì¼ ë°ì´í„°ë§Œ ìœ ì§€í•©ë‹ˆë‹¤. ë°±ì—… ìƒíƒœë¥¼ ì•Œë¦¬ê¸° ìœ„í•´ Telegramì„ í†µí•´ ì•Œë¦¼ì„ ë³´ëƒ…ë‹ˆë‹¤.\n\n## ì‘ë™ ì›ë¦¬\n\n### ë°±ì—… ìƒì„± í”„ë¡œì„¸ìŠ¤ ğŸ—‚ï¸\n- **ë°±ì—… íŠ¸ë¦¬ê±°**: ì›Œí¬í”Œë¡œëŠ” ìˆ˜ë™ íŠ¸ë¦¬ê±°ë‚˜ ë§¤ì¼ ì‹¤í–‰ë˜ëŠ” ìŠ¤ì¼€ì¤„ íŠ¸ë¦¬ê±°ë¡œ ì‹œì‘ë©ë‹ˆë‹¤.\n- **í´ë” ìƒì„±**: Google Driveì— íƒ€ì„ìŠ¤íƒ¬í”„ê°€ í¬í•¨ëœ ì´ë¦„ì˜ ìƒˆ í´ë”ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ (ì˜ˆ: `n8n-Workflow-Backups-YYYY-MM-DD`).\n- **ì›Œí¬í”Œë¡œìš° ê²€ìƒ‰**: n8n ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ëª¨ë“  ì›Œí¬í”Œë¡œìš°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\n- **íŒŒì¼ ë³€í™˜**: ê° ì›Œí¬í”Œë¡œìš°ë¥¼ JSON íŒŒì¼ë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥í•©ë‹ˆë‹¤.\n- **íŒŒì¼ ì—…ë¡œë“œ**: ìƒì„±ëœ Google Drive í´ë”ì— JSON íŒŒì¼ì„ ì €ì¥í•©ë‹ˆë‹¤.\n\n### ë°±ì—… ê´€ë¦¬ ğŸ”„\n- **í´ë” ê²€ìƒ‰**: Google Driveì—ì„œ `n8n-Workflow-Backups`ì™€ ì¼ì¹˜í•˜ëŠ” ê¸°ì¡´ ë°±ì—… í´ë”ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.\n- **ë³´ì¡´ ì •ì±…**: ì‚¬ìš©ì ì •ì˜ JavaScript í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ 7ì¼ ì´ìƒ ì§€ë‚œ í´ë”ë¥¼ ì‹ë³„í•˜ê³  ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•˜ì—¬ ê³µê°„ì„ í™•ë³´í•©ë‹ˆë‹¤.\n\n### ì•Œë¦¼ ğŸ“²\n- **Telegram ì•Œë¦¼**: ë°±ì—… í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ë©´ Telegramì„ í†µí•´ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ í´ë” ì´ë¦„ê³¼ Google Drive ì ‘ê·¼ ë§í¬ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.\n\n## ì„¤ì • ë‹¨ê³„\n\n### API êµ¬ì„± ğŸ”‘\n1. **Google Drive í†µí•©**:\n   - n8nì—ì„œ Google Drive OAuth2 ìê²© ì¦ëª…ì„ ì„¤ì •í•©ë‹ˆë‹¤.\n   - ë°±ì—…ì„ ìœ„í•œ ë£¨íŠ¸ í´ë” ë˜ëŠ” ì›í•˜ëŠ” ìœ„ì¹˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.\n2. **n8n API ì ‘ê·¼**:\n   - ì›Œí¬í”Œë¡œìš°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ n8n API ìê²© ì¦ëª…ì„ êµ¬ì„±í•©ë‹ˆë‹¤.\n3. **Telegram ì•Œë¦¼**:\n   - ì•Œë¦¼ ì „ë‹¬ì„ ìœ„í•´ Telegram ë´‡ ìê²© ì¦ëª…ê³¼ ì±„íŒ… IDë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\n\n### ì›Œí¬í”Œë¡œìš° ì‚¬ìš©ì ì •ì˜ âš™ï¸\n1. ìë™ ë°±ì—… ìŠ¤ì¼€ì¤„ì„ ì •ì˜í•©ë‹ˆë‹¤ (ì˜ˆ: ë§¤ì¼ ìì •).\n2. ë³´ì¡´ ê¸°ê°„ì„ ì¡°ì •í•˜ì—¬ ë” ë§ê±°ë‚˜ ì ì€ ì¼ìˆ˜ì˜ ë°±ì—…ì„ ìœ ì§€í•©ë‹ˆë‹¤.\n3. í•„ìš”ì— ë”°ë¼ Telegram ë©”ì‹œì§€ í˜•ì‹ì„ ì‚¬ìš©ì ì •ì˜í•©ë‹ˆë‹¤.\n\n### í…ŒìŠ¤íŠ¸ ë° ë°°í¬ ğŸš€\n1. í´ë” ìƒì„±ê³¼ íŒŒì¼ ì—…ë¡œë“œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì›Œí¬í”Œë¡œìš°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.\n2. 7ì¼ í›„ ì˜¤ë˜ëœ í´ë”ê°€ ì˜¬ë°”ë¥´ê²Œ ì‚­ì œë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\n3. Telegram ì•Œë¦¼ì´ ì •í™•í•œ ì„¸ë¶€ ì‚¬í•­ê³¼ í•¨ê»˜ ì „ì†¡ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\n\n## ì‚¬ìš© ì‚¬ë¡€ ì‹œë‚˜ë¦¬ì˜¤\nì´ ì›Œí¬í”Œë¡œëŠ” n8n ì›Œí¬í”Œë¡œìš°ë¥¼ ì•ˆì „í•˜ê²Œ ë°±ì—…í•˜ê³  ì •ë¦¬í•˜ê³  ì‹¶ì€ íŒ€ì´ë‚˜ ê°œì¸ì—ê²Œ ì í•©í•©ë‹ˆë‹¤. íŠ¹íˆ ë‹¤ìŒì— ìœ ìš©í•©ë‹ˆë‹¤:\n- ìš°ë°œì ì¸ ë°ì´í„° ì†ì‹¤ ë°©ì§€.\n- ì¼ìƒì ì¸ ê´€ë¦¬ ì‘ì—… ìë™í™”.\n\nìë™ ë°±ì—…, ë³´ì¡´ ê´€ë¦¬, ì‹¤ì‹œê°„ ì•Œë¦¼ì„ ê²°í•©í•˜ì—¬ ì´ ì›Œí¬í”Œë¡œëŠ” n8n ì›Œí¬í”Œë¡œìš°ê°€ í•­ìƒ ì•ˆì „í•˜ê³  ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤!"
      },
      "typeVersion": 1
    }
  ],
  "active": true,
  "pinData": {},
  "settings": {
    "timezone": "America/Vancouver",
    "callerPolicy": "workflowsFromSameOwner",
    "executionOrder": "v1"
  },
  "versionId": "11ff8d25-bbc5-4681-b292-ac60a00fd7b0",
  "connections": {
    "Every Day": {
      "main": [
        [
          {
            "node": "Get DateTIme",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Once": {
      "main": [
        [
          {
            "node": "Search Folder Names",
            "type": "main",
            "index": 0
          },
          {
            "node": "Complete Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get DateTIme": {
      "main": [
        [
          {
            "node": "Create Folder with DateTime Stamp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit to 200": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Workflows": {
      "main": [
        [
          {
            "node": "Limit to 200",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Execute Once",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Convert Workflow to JSON File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search Folder Names": {
      "main": [
        [
          {
            "node": "Find Folders to Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On clicking 'execute'": {
      "main": [
        [
          {
            "node": "Get DateTIme",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Find Folders to Delete": {
      "main": [
        [
          {
            "node": "Delete Folders",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert Workflow to JSON File": {
      "main": [
        [
          {
            "node": "Save JSON File to Google Drive Folder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Folder with DateTime Stamp": {
      "main": [
        [
          {
            "node": "Get Workflows",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save JSON File to Google Drive Folder": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}