{
  "id": "kbJb4VMD3SZlcS2u",
  "meta": {
    "instanceId": "a5283507e1917a33cc3ae615b2e7d5ad2c1e50955e6f831272ddd5ab816f3fb6",
    "templateCredsSetupCompleted": true
  },
  "name": "CoinMarketCap_Exchange_and_Community_Agent_Tool",
  "tags": [],
  "nodes": [
    {
      "id": "c055762a-8fe7-4141-a639-df2372f30060",
      "name": "When Executed by Another Workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        -160,
        340
      ],
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "sessionId"
            },
            {
              "name": "message"
            }
          ]
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "3609967c-f7c4-4be5-8cf5-1213dcf8cd39",
      "name": "CoinMarketCap Exchange and Community Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        300,
        340
      ],
      "parameters": {
        "text": "={{ $json.message }}",
        "options": {
          "systemMessage": "You are a **digital asset intelligence agent** designed to provide deep insights into the cryptocurrency ecosystem by querying CoinMarketCap's API. You support data retrieval across exchanges, community sentiment, and index tracking.\n\n---\n\n### ğŸ› ï¸ Available Tools & Capabilities\n\n#### 1. ğŸ” **Exchange Map**\n- **Purpose:** Retrieve a list of all registered cryptocurrency exchanges.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v1/exchange/map`\n- **Query Parameters:** \n  - `slug` (recommended starting point)\n  - `listing_status`, `start`, `limit`, `crypto_id`\n- **Returns:** Exchange ID, name, slug â€” essential for identifying exchanges.\n- **Usage:** Use first to acquire the `id` needed by other tools.\n\n---\n\n#### 2. ğŸ§¾ **Exchange Info**\n- **Purpose:** Obtain metadata for a specific exchange.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v1/exchange/info`\n- **Required Parameter:** `id` (from Exchange Map)\n- **Returns:** Description, launch year, country, website/Twitter links, and status.\n\n---\n\n#### 3. ğŸ’° **Exchange Assets**\n- **Purpose:** View on-chain token holdings of an exchange.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v1/exchange/assets`\n- **Required Parameter:** `id` (from Exchange Map)\n- **Returns:** Token balances, wallet addresses, blockchain platform, and USD value.\n\n---\n\n#### 4. ğŸ“ˆ **CMC 100 Index**\n- **Purpose:** Get the latest CoinMarketCap 100 Index data.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v3/index/cmc100-latest`\n- **Returns:** Constituents of the index and their weights.\n\n---\n\n#### 5. ğŸ˜± **Fear and Greed Index (Latest)**\n- **Purpose:** Access current crypto market sentiment.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v3/fear-and-greed/latest`\n- **Returns:** Sentiment index score and classification (e.g., Fear, Greed).\n\n---\n\n### âš ï¸ Error Trap: API Response Overload\nIf the API response returns **too much data** and exceeds the GPT model's token limit:\n- Notify the user with the message:  \n  **\"âš ï¸ The requested data exceeds the processing capacity of this model. Please refine your query by limiting results or filtering data.\"**\n- Suggest parameters like `limit`, `start`, or using a specific `id` or `slug` to reduce data size.\n\n---\n\nKeep responses structured, insightful, and performant. Always validate if required parameters are available before invoking a tool. Prioritize `Exchange Map` for ID resolution before calling `Exchange Info` or `Exchange Assets`.\n\n"
        },
        "promptType": "define"
      },
      "typeVersion": 1.8
    },
    {
      "id": "811480ce-f2c9-4400-b585-1a3609b5bef0",
      "name": "Exchange and Community Agent Brain",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -320,
        620
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "yUizd8t0sD5wMYVG",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "007b07fd-2abe-4bdd-80ef-8883e0cbfcec",
      "name": "Exchange and Community Agent Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        -140,
        620
      ],
      "parameters": {},
      "typeVersion": 1.3
    },
    {
      "id": "669566d0-3dc5-413e-a8b5-80cf4aeaa54d",
      "name": "Exchange Map",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        60,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v1/exchange/map",
        "sendQuery": true,
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "parametersQuery": {
          "values": [
            {
              "name": "slug"
            }
          ]
        },
        "toolDescription": "Get a map of all crypto exchanges with CoinMarketCap ID, name, and slug.\n\n1st query with only the slug only, if error then try others.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "03b3e44f-a740-414c-a011-de4d571b7968",
      "name": "Exchange Info",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        280,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v1/exchange/info",
        "sendQuery": true,
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "parametersQuery": {
          "values": [
            {
              "name": "id"
            }
          ]
        },
        "toolDescription": "Get metadata for a crypto exchange including description, launch date, country, and links.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "65c2b8ab-7d6d-415e-a436-0a9c14af2457",
      "name": "CMC 100 Index",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        740,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v3/index/cmc100-latest",
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "toolDescription": "Returns the latest CoinMarketCap 100 Index value, including constituents and their weights.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "51a94f35-4405-4e53-9fa5-91911759802d",
      "name": "Fear and Greed Latest",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        980,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v3/fear-and-greed/latest",
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "toolDescription": "Returns the latest value from the CMC Crypto Fear and Greed Index.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "26240549-9b41-4b6a-bf24-d61c8ee155ca",
      "name": "Exchange Assets",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        520,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v1/exchange/assets",
        "sendQuery": true,
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "parametersQuery": {
          "values": [
            {
              "name": "id"
            }
          ]
        },
        "toolDescription": "Returns token holdings of a specific exchange including wallet addresses, platform, balance, and USD value.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "22b5608c-467e-41ff-81d9-559d110b872d",
      "name": "Exchange & Community Guide",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1520,
        -680
      ],
      "parameters": {
        "width": 1200,
        "height": 720,
        "content": "# ğŸ§  CoinMarketCap_Exchange_and_Community_Agent_Tool ê°€ì´ë“œ\n\nì´ ì—ì´ì „íŠ¸ëŠ” CoinMarketCap API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ **êµí™˜ ìˆ˜ì¤€** ë°ì´í„°, **ì»¤ë®¤ë‹ˆí‹° ê°ì •**, ë° **ì¸ë±ìŠ¤ ì¸ì‚¬ì´íŠ¸**ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n\n## ğŸ”Œ ì§€ì› ë„êµ¬\n1. `/v1/exchange/map` â€“ êµí™˜ ID, ì´ë¦„, ë° ìŠ¬ëŸ¬ê·¸ ê°€ì ¸ì˜¤ê¸°\n2. `/v1/exchange/info` â€“ ë©”íƒ€ë°ì´í„°: ì¶œì‹œ ë‚ ì§œ, ì†Œì…œ, ìœ„ì¹˜\n3. `/v1/exchange/assets` â€“ êµí™˜ì˜ í† í° ë³´ìœ  ë‚´ì—­\n4. `/v3/index/cmc100-latest` â€“ CoinMarketCap 100 ì¸ë±ìŠ¤ ì •ë³´\n5. `/v3/fear-and-greed/latest` â€“ ê°ì • ì§€ìˆ˜ (0â€“100)\n\n## ğŸ§  ì—ì´ì „íŠ¸ êµ¬ì„± ìš”ì†Œ:\n- **ğŸ§  Brain**: GPT-4o Mini\n- **ğŸ’¾ Memory**: ëŒ€í™” ìƒíƒœ ì²˜ë¦¬ê¸°\n- **âš™ï¸ Tools**: 5ê°œì˜ ì§ì ‘ API ì—”ë“œí¬ì¸íŠ¸\n\n## ğŸ§© íŠ¸ë¦¬ê±° ë§¤ê°œë³€ìˆ˜:\n- `message` â€“ ì£¼ìš” ì¿¼ë¦¬ í”„ë¡¬í”„íŠ¸\n- `sessionId` â€“ ë§¥ë½ ë©”ëª¨ë¦¬ í‚¤\n\n## ğŸ”‘ ì£¼ì˜ì‚¬í•­:\n- `Exchange Map`ì„ ì‚¬ìš©í•˜ì—¬ `Exchange Info` ë˜ëŠ” `Assets` í˜¸ì¶œ ì „ì— ìœ íš¨í•œ `id`ë¥¼ ê°€ì ¸ì˜´\n- Fear & Greed ì§€ìˆ˜ëŠ” ë§¤ì¼ ì—…ë°ì´íŠ¸ëœ ë°ì´í„° í¬ì¸íŠ¸ë¥¼ ë°˜í™˜í•¨\n- ì¸ë±ìŠ¤ ë„êµ¬ëŠ” êµ¬ì¡°í™”ëœ êµ¬ì„± ìš”ì†Œ ê°€ì¤‘ì¹˜ë¥¼ ë°˜í™˜í•¨"
      },
      "typeVersion": 1
    },
    {
      "id": "dd38cd37-bff7-4200-94e4-a7f2a0f3b979",
      "name": "Usage & Examples",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -80,
        -680
      ],
      "parameters": {
        "color": 5,
        "width": 840,
        "height": 920,
        "content": "## ğŸ“Œ ì‚¬ìš© ì§€ì¹¨\n\n### âœ… 1ë‹¨ê³„: ì…ë ¥ ì œê³µ\nìŠ¬ëŸ¬ê·¸(slug)ë¥¼ êµí™˜ì†Œ(exchanges)ì— ì‚¬ìš©í•˜ê±°ë‚˜ IDë¥¼ ë©”íƒ€ë°ì´í„°/ìì‚°(metadata/assets)ì— ì‚¬ìš©í•˜ì„¸ìš”.\n\n### âœ… 2ë‹¨ê³„: ê°ë…ì ì—ì´ì „íŠ¸ë¡œë¶€í„° íŠ¸ë¦¬ê±°\nì£¼ ì›Œí¬í”Œë¡œìš°ê°€ 'message'ì™€ 'sessionId'ë¥¼ ë³´ë‚¼ ê²ƒì…ë‹ˆë‹¤.\n\n### âœ… 3ë‹¨ê³„: ê²°ê³¼ ì¶œë ¥\nêµí™˜ì†Œ ë˜ëŠ” ì¸ë±ìŠ¤ ë°ì´í„°ì— ëŒ€í•œ í†µì°°ë ¥ì„ í¬í•¨í•œ JSONì„ ë°˜í™˜í•©ë‹ˆë‹¤.\n\n---\n\n## ğŸ” ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸\n\n### 1ï¸âƒ£ ìµœì‹  Fear & Greed ì ìˆ˜ í‘œì‹œ\n```plaintext\nGET /v3/fear-and-greed/latest\n```\n\n### 2ï¸âƒ£ Binance êµí™˜ì†Œ í† í° ë³´ìœ ëŸ‰ ê°€ì ¸ì˜¤ê¸°\n```plaintext\n1. GET /v1/exchange/map?slug=binance\n2. IDë¥¼ ì‚¬ìš©í•˜ì—¬ /v1/exchange/assets?id=... ì¿¼ë¦¬\n```\n\n### 3ï¸âƒ£ CMC 100 Indexë¥¼ êµ¬ì„±í•˜ëŠ” ì½”ì¸ ë¬´ì—‡ì¸ê°€?\n```plaintext\nGET /v3/index/cmc100-latest\n```\n\n### 4ï¸âƒ£ Coinbaseì— ëŒ€í•œ ì •ë³´ í‘œì‹œ\n```plaintext\n1. /v1/exchange/map?slug=coinbase\n2. /v1/exchange/info?id=...\n```\n\n### ì¶œë ¥"
      },
      "typeVersion": 1
    },
    {
      "id": "ce0e7093-9fe0-4b9c-8cf5-50cdfef45d94",
      "name": "Errors & Licensing",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1020,
        -680
      ],
      "parameters": {
        "color": 3,
        "width": 640,
        "height": 500,
        "content": "## âš ï¸ ì˜¤ë¥˜ ì²˜ë¦¬ íŒ\n\n| Error Code | Meaning |\n|------------|---------|\n| `400` | ì˜ëª»ëœ ìš”ì²­ â€“ ë§¤ê°œë³€ìˆ˜ ëˆ„ë½/ë¬´íš¨ |\n| `401` | ê¶Œí•œ ì—†ìŒ â€“ API í‚¤ í™•ì¸ |\n| `429` | ì†ë„ ì œí•œ ì´ˆê³¼ |\n| `500` | CoinMarketCap ì„œë²„ ì˜¤ë¥˜ |\n\n### âš ï¸ ëŒ€í˜• ì‘ë‹µ ê²½ê³ \nê²°ê³¼ ë°ì´í„°ê°€ ë©”ëª¨ë¦¬ ì œí•œì„ ì´ˆê³¼í•˜ëŠ” ê²½ìš°:  \n- í”„ë¡¬í”„íŠ¸: _â€œâš ï¸ ë°ì´í„°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤, ì œí•œì´ë‚˜ í•„í„°ë¡œ ì¿¼ë¦¬ë¥¼ ê°œì„ í•˜ì„¸ìš”.â€_\n\n---\n\n**ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?**  \nğŸŒ LinkedInì—ì„œ ì—°ê²°í•˜ê¸°:  \nğŸ”— [http://linkedin.com/in/donjayamahajr](http://linkedin.com/in/donjayamahajr)\n\nÂ© 2025 Treasurium Capital Limited Company. All rights reserved.  \nì´ AI ì›Œí¬í”Œë¡œìš° ì•„í‚¤í…ì²˜, ë¡œì§, ë””ìì¸ ë° í”„ë¡¬í”„íŠ¸ êµ¬ì¡°ëŠ” Treasurium Capital Limited Companyì˜ ì§€ì  ì¬ì‚°ì…ë‹ˆë‹¤. ë¯¸êµ­ ì €ì‘ê¶Œë²•ì— ë”°ë¼ ë¬´ë‹¨ ë³µì œ, ì¬ë°°í¬ ë˜ëŠ” ì¬íŒë§¤ëŠ” ê¸ˆì§€ë©ë‹ˆë‹¤. ë¼ì´ì„ ìŠ¤ëœ ìš©ë„ë§Œ í—ˆìš©ë©ë‹ˆë‹¤."
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "faf44acc-2d07-4185-877c-b57f9c8c88bb",
  "connections": {
    "Exchange Map": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "CMC 100 Index": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Exchange Info": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Exchange Assets": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Fear and Greed Latest": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Exchange and Community Agent Brain": {
      "ai_languageModel": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Exchange and Community Agent Memory": {
      "ai_memory": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  }
}