{
  "id": "kbJb4VMD3SZlcS2u",
  "meta": {
    "instanceId": "a5283507e1917a33cc3ae615b2e7d5ad2c1e50955e6f831272ddd5ab816f3fb6",
    "templateCredsSetupCompleted": true
  },
  "name": "CoinMarketCap_Exchange_and_Community_Agent_Tool",
  "tags": [],
  "nodes": [
    {
      "id": "c055762a-8fe7-4141-a639-df2372f30060",
      "name": "When Executed by Another Workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        -160,
        340
      ],
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "sessionId"
            },
            {
              "name": "message"
            }
          ]
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "3609967c-f7c4-4be5-8cf5-1213dcf8cd39",
      "name": "CoinMarketCap Exchange and Community Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        300,
        340
      ],
      "parameters": {
        "text": "={{ $json.message }}",
        "options": {
          "systemMessage": "You are a **digital asset intelligence agent** designed to provide deep insights into the cryptocurrency ecosystem by querying CoinMarketCap's API. You support data retrieval across exchanges, community sentiment, and index tracking.\n\n---\n\n### üõ†Ô∏è Available Tools & Capabilities\n\n#### 1. üîç **Exchange Map**\n- **Purpose:** Retrieve a list of all registered cryptocurrency exchanges.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v1/exchange/map`\n- **Query Parameters:** \n  - `slug` (recommended starting point)\n  - `listing_status`, `start`, `limit`, `crypto_id`\n- **Returns:** Exchange ID, name, slug ‚Äî essential for identifying exchanges.\n- **Usage:** Use first to acquire the `id` needed by other tools.\n\n---\n\n#### 2. üßæ **Exchange Info**\n- **Purpose:** Obtain metadata for a specific exchange.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v1/exchange/info`\n- **Required Parameter:** `id` (from Exchange Map)\n- **Returns:** Description, launch year, country, website/Twitter links, and status.\n\n---\n\n#### 3. üí∞ **Exchange Assets**\n- **Purpose:** View on-chain token holdings of an exchange.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v1/exchange/assets`\n- **Required Parameter:** `id` (from Exchange Map)\n- **Returns:** Token balances, wallet addresses, blockchain platform, and USD value.\n\n---\n\n#### 4. üìà **CMC 100 Index**\n- **Purpose:** Get the latest CoinMarketCap 100 Index data.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v3/index/cmc100-latest`\n- **Returns:** Constituents of the index and their weights.\n\n---\n\n#### 5. üò± **Fear and Greed Index (Latest)**\n- **Purpose:** Access current crypto market sentiment.\n- **Endpoint:** `https://pro-api.coinmarketcap.com/v3/fear-and-greed/latest`\n- **Returns:** Sentiment index score and classification (e.g., Fear, Greed).\n\n---\n\n### ‚ö†Ô∏è Error Trap: API Response Overload\nIf the API response returns **too much data** and exceeds the GPT model's token limit:\n- Notify the user with the message:  \n  **\"‚ö†Ô∏è The requested data exceeds the processing capacity of this model. Please refine your query by limiting results or filtering data.\"**\n- Suggest parameters like `limit`, `start`, or using a specific `id` or `slug` to reduce data size.\n\n---\n\nKeep responses structured, insightful, and performant. Always validate if required parameters are available before invoking a tool. Prioritize `Exchange Map` for ID resolution before calling `Exchange Info` or `Exchange Assets`.\n\n"
        },
        "promptType": "define"
      },
      "typeVersion": 1.8
    },
    {
      "id": "811480ce-f2c9-4400-b585-1a3609b5bef0",
      "name": "Exchange and Community Agent Brain",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -320,
        620
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "yUizd8t0sD5wMYVG",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "007b07fd-2abe-4bdd-80ef-8883e0cbfcec",
      "name": "Exchange and Community Agent Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        -140,
        620
      ],
      "parameters": {},
      "typeVersion": 1.3
    },
    {
      "id": "669566d0-3dc5-413e-a8b5-80cf4aeaa54d",
      "name": "Exchange Map",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        60,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v1/exchange/map",
        "sendQuery": true,
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "parametersQuery": {
          "values": [
            {
              "name": "slug"
            }
          ]
        },
        "toolDescription": "Get a map of all crypto exchanges with CoinMarketCap ID, name, and slug.\n\n1st query with only the slug only, if error then try others.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "03b3e44f-a740-414c-a011-de4d571b7968",
      "name": "Exchange Info",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        280,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v1/exchange/info",
        "sendQuery": true,
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "parametersQuery": {
          "values": [
            {
              "name": "id"
            }
          ]
        },
        "toolDescription": "Get metadata for a crypto exchange including description, launch date, country, and links.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "65c2b8ab-7d6d-415e-a436-0a9c14af2457",
      "name": "CMC 100 Index",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        740,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v3/index/cmc100-latest",
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "toolDescription": "Returns the latest CoinMarketCap 100 Index value, including constituents and their weights.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "51a94f35-4405-4e53-9fa5-91911759802d",
      "name": "Fear and Greed Latest",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        980,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v3/fear-and-greed/latest",
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "toolDescription": "Returns the latest value from the CMC Crypto Fear and Greed Index.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "26240549-9b41-4b6a-bf24-d61c8ee155ca",
      "name": "Exchange Assets",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        520,
        620
      ],
      "parameters": {
        "url": "https://pro-api.coinmarketcap.com/v1/exchange/assets",
        "sendQuery": true,
        "sendHeaders": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "parametersQuery": {
          "values": [
            {
              "name": "id"
            }
          ]
        },
        "toolDescription": "Returns token holdings of a specific exchange including wallet addresses, platform, balance, and USD value.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Accept"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "OKXROn8aWkgAOvvV",
          "name": "CoinMarketCap Standard"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "22b5608c-467e-41ff-81d9-559d110b872d",
      "name": "Exchange & Community Guide",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1520,
        -680
      ],
      "parameters": {
        "width": 1200,
        "height": 720,
        "content": "# üß† CoinMarketCap_Exchange_and_Community_Agent_Tool Í∞ÄÏù¥Îìú\n\nÏù¥ ÏóêÏù¥Ï†ÑÌä∏Îäî CoinMarketCap API ÏóîÎìúÌè¨Ïù∏Ìä∏Î•º ÏÇ¨Ïö©ÌïòÏó¨ **ÍµêÌôò ÏàòÏ§Ä** Îç∞Ïù¥ÌÑ∞, **Ïª§ÎÆ§ÎãàÌã∞ Í∞êÏ†ï**, Î∞è **Ïù∏Îç±Ïä§ Ïù∏ÏÇ¨Ïù¥Ìä∏**Î•º Ï≤òÎ¶¨Ìï©ÎãàÎã§.\n\n## üîå ÏßÄÏõê ÎèÑÍµ¨\n1. `/v1/exchange/map` ‚Äì ÍµêÌôò ID, Ïù¥Î¶Ñ, Î∞è Ïä¨Îü¨Í∑∏ Í∞ÄÏ†∏Ïò§Í∏∞\n2. `/v1/exchange/info` ‚Äì Î©îÌÉÄÎç∞Ïù¥ÌÑ∞: Ï∂úÏãú ÎÇ†Ïßú, ÏÜåÏÖú, ÏúÑÏπò\n3. `/v1/exchange/assets` ‚Äì ÍµêÌôòÏùò ÌÜ†ÌÅ∞ Î≥¥Ïú† ÎÇ¥Ïó≠\n4. `/v3/index/cmc100-latest` ‚Äì CoinMarketCap 100 Ïù∏Îç±Ïä§ Ï†ïÎ≥¥\n5. `/v3/fear-and-greed/latest` ‚Äì Í∞êÏ†ï ÏßÄÏàò (0‚Äì100)\n\n## üß† ÏóêÏù¥Ï†ÑÌä∏ Íµ¨ÏÑ± ÏöîÏÜå:\n- **üß† Brain**: GPT-4o Mini\n- **üíæ Memory**: ÎåÄÌôî ÏÉÅÌÉú Ï≤òÎ¶¨Í∏∞\n- **‚öôÔ∏è Tools**: 5Í∞úÏùò ÏßÅÏ†ë API ÏóîÎìúÌè¨Ïù∏Ìä∏\n\n## üß© Ìä∏Î¶¨Í±∞ Îß§Í∞úÎ≥ÄÏàò:\n- `message` ‚Äì Ï£ºÏöî ÏøºÎ¶¨ ÌîÑÎ°¨ÌîÑÌä∏\n- `sessionId` ‚Äì Îß•ÎùΩ Î©îÎ™®Î¶¨ ÌÇ§\n\n## üîë Ï£ºÏùòÏÇ¨Ìï≠:\n- `Exchange Map`ÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ `Exchange Info` ÎòêÎäî `Assets` Ìò∏Ï∂ú Ï†ÑÏóê Ïú†Ìö®Ìïú `id`Î•º Í∞ÄÏ†∏Ïò¥\n- Fear & Greed ÏßÄÏàòÎäî Îß§Ïùº ÏóÖÎç∞Ïù¥Ìä∏Îêú Îç∞Ïù¥ÌÑ∞ Ìè¨Ïù∏Ìä∏Î•º Î∞òÌôòÌï®\n- Ïù∏Îç±Ïä§ ÎèÑÍµ¨Îäî Íµ¨Ï°∞ÌôîÎêú Íµ¨ÏÑ± ÏöîÏÜå Í∞ÄÏ§ëÏπòÎ•º Î∞òÌôòÌï®"
      },
      "typeVersion": 1
    },
    {
      "id": "dd38cd37-bff7-4200-94e4-a7f2a0f3b979",
      "name": "Usage & Examples",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -80,
        -680
      ],
      "parameters": {
        "color": 5,
        "width": 840,
        "height": 920,
        "content": "## üìå ÏÇ¨Ïö© ÏßÄÏπ®\n\n### ‚úÖ 1Îã®Í≥Ñ: ÏûÖÎ†• Ï†úÍ≥µ\nÏä¨Îü¨Í∑∏(slug)Î•º ÍµêÌôòÏÜå(exchanges)Ïóê ÏÇ¨Ïö©ÌïòÍ±∞ÎÇò IDÎ•º Î©îÌÉÄÎç∞Ïù¥ÌÑ∞/ÏûêÏÇ∞(metadata/assets)Ïóê ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî.\n\n### ‚úÖ 2Îã®Í≥Ñ: Í∞êÎèÖÏûê ÏóêÏù¥Ï†ÑÌä∏Î°úÎ∂ÄÌÑ∞ Ìä∏Î¶¨Í±∞\nÏ£º ÏõåÌÅ¨ÌîåÎ°úÏö∞Í∞Ä 'message'ÏôÄ 'sessionId'Î•º Î≥¥ÎÇº Í≤ÉÏûÖÎãàÎã§.\n\n### ‚úÖ 3Îã®Í≥Ñ: Í≤∞Í≥º Ï∂úÎ†•\nÍµêÌôòÏÜå ÎòêÎäî Ïù∏Îç±Ïä§ Îç∞Ïù¥ÌÑ∞Ïóê ÎåÄÌïú ÌÜµÏ∞∞Î†•ÏùÑ Ìè¨Ìï®Ìïú JSONÏùÑ Î∞òÌôòÌï©ÎãàÎã§.\n\n---\n\n## üîç ÏòàÏãú ÌîÑÎ°¨ÌîÑÌä∏\n\n### 1Ô∏è‚É£ ÏµúÏã† Fear & Greed Ï†êÏàò ÌëúÏãú\n```plaintext\nGET /v3/fear-and-greed/latest\n```\n\n### 2Ô∏è‚É£ Binance ÍµêÌôòÏÜå ÌÜ†ÌÅ∞ Î≥¥Ïú†Îüâ Í∞ÄÏ†∏Ïò§Í∏∞\n```plaintext\n1. GET /v1/exchange/map?slug=binance\n2. IDÎ•º ÏÇ¨Ïö©ÌïòÏó¨ /v1/exchange/assets?id=... ÏøºÎ¶¨\n```\n\n### 3Ô∏è‚É£ CMC 100 IndexÎ•º Íµ¨ÏÑ±ÌïòÎäî ÏΩîÏù∏ Î¨¥ÏóáÏù∏Í∞Ä?\n```plaintext\nGET /v3/index/cmc100-latest\n```\n\n### 4Ô∏è‚É£ CoinbaseÏóê ÎåÄÌïú Ï†ïÎ≥¥ ÌëúÏãú\n```plaintext\n1. /v1/exchange/map?slug=coinbase\n2. /v1/exchange/info?id=...\n```\n\n### Ï∂úÎ†•"
      },
      "typeVersion": 1
    },
    {
      "id": "ce0e7093-9fe0-4b9c-8cf5-50cdfef45d94",
      "name": "Errors & Licensing",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1020,
        -680
      ],
      "parameters": {
        "color": 3,
        "width": 640,
        "height": 500,
        "content": "## ‚ö†Ô∏è Ïò§Î•ò Ï≤òÎ¶¨ ÌåÅ\n\n| Error Code | Meaning |\n|------------|---------|\n| `400` | ÏûòÎ™ªÎêú ÏöîÏ≤≠ ‚Äì Îß§Í∞úÎ≥ÄÏàò ÎàÑÎùΩ/Î¨¥Ìö® |\n| `401` | Í∂åÌïú ÏóÜÏùå ‚Äì API ÌÇ§ ÌôïÏù∏ |\n| `429` | ÏÜçÎèÑ Ï†úÌïú Ï¥àÍ≥º |\n| `500` | CoinMarketCap ÏÑúÎ≤Ñ Ïò§Î•ò |\n\n### ‚ö†Ô∏è ÎåÄÌòï ÏùëÎãµ Í≤ΩÍ≥†\nÍ≤∞Í≥º Îç∞Ïù¥ÌÑ∞Í∞Ä Î©îÎ™®Î¶¨ Ï†úÌïúÏùÑ Ï¥àÍ≥ºÌïòÎäî Í≤ΩÏö∞:  \n- ÌîÑÎ°¨ÌîÑÌä∏: _‚Äú‚ö†Ô∏è Îç∞Ïù¥ÌÑ∞Í∞Ä ÎÑàÎ¨¥ ÌÅΩÎãàÎã§, Ï†úÌïúÏù¥ÎÇò ÌïÑÌÑ∞Î°ú ÏøºÎ¶¨Î•º Í∞úÏÑ†ÌïòÏÑ∏Ïöî.‚Äù_\n\n---\n\n**ÎèÑÏõÄÏù¥ ÌïÑÏöîÌïòÏã†Í∞ÄÏöî?**  \nüåê LinkedInÏóêÏÑú Ïó∞Í≤∞ÌïòÍ∏∞:  \nüîó [http://linkedin.com/in/donjayamahajr](http://linkedin.com/in/donjayamahajr)\n\n¬© 2025 Treasurium Capital Limited Company. All rights reserved.  \nÏù¥ AI ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÏïÑÌÇ§ÌÖçÏ≤ò, Î°úÏßÅ, ÎîîÏûêÏù∏ Î∞è ÌîÑÎ°¨ÌîÑÌä∏ Íµ¨Ï°∞Îäî Treasurium Capital Limited CompanyÏùò ÏßÄÏ†Å Ïû¨ÏÇ∞ÏûÖÎãàÎã§. ÎØ∏Íµ≠ Ï†ÄÏûëÍ∂åÎ≤ïÏóê Îî∞Îùº Î¨¥Îã® Î≥µÏ†ú, Ïû¨Î∞∞Ìè¨ ÎòêÎäî Ïû¨ÌåêÎß§Îäî Í∏àÏßÄÎê©ÎãàÎã§. ÎùºÏù¥ÏÑ†Ïä§Îêú Ïö©ÎèÑÎßå ÌóàÏö©Îê©ÎãàÎã§."
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "faf44acc-2d07-4185-877c-b57f9c8c88bb",
  "connections": {
    "Exchange Map": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "CMC 100 Index": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Exchange Info": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Exchange Assets": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Fear and Greed Latest": {
      "ai_tool": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Exchange and Community Agent Brain": {
      "ai_languageModel": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Exchange and Community Agent Memory": {
      "ai_memory": [
        [
          {
            "node": "CoinMarketCap Exchange and Community Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  }
}